<html>
    <head>
        <title>Takeaway Decider Wheel</title>
        <script src='Winwheel.js'></script> <!-- script library for Winwheel from http://dougtesting.net/ -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"></script> <!-- Use of Greenstock Animation Platform from https://greensock.com/ -->
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="canvasContainer">
            <canvas id="canvas" width="500" height="500"> <!-- Wheel container size -->
            </canvas>
            <img id="prizePointer" src="assets/images/prizepointer.png" alt="prize pointer" /> <!-- Pointer image -->
        </div>
        <script>
    let theWheel = new Winwheel({
                'numSegments' : 6, // Number of segments.
                'textAlignment'  : 'inner', // Text alignment.
                'outerRadius'   : 200, // Radius of outer circle.
                'pointerAngle' : 90, // Degree angle that pointer sits at.
                'innerRadius'   : 40, // Radius of inner circle.
                'segments'    : // Individual segment styling.
                [
                    {'fillStyle' : '#eeefff', 'text' : 'Segment 1'},
                    {'fillStyle' : '#89f26e', 'text' : 'Segment 2'},
                    {'fillStyle' : '#7de6ef', 'text' : 'Segment 3'},
                    {'fillStyle' : '#e7706f', 'text' : 'Segment 4'},
                    {'fillStyle' : '#eff111', 'text' : 'Segment 5'},
                    {'fillStyle' : '#e77811', 'text' : 'Segment 6'}
                ],
               'pins' :    // Specify pin parameters.
        {
            'number'      : 24,  // Number of pins.
            'outerRadius' : 5,  // Radius of each pin.
            'margin'      : 5,  // Margin ofpin from edge of wheel.
            'fillStyle'   : '#636363', // Fill colour of pin.
            'strokeStyle' : '#ffffff' // Border colour of pin.
        },
            'animation' :
            {
        'type'     : 'spinToStop',  // Animation set to spin and then stop.
        'duration' : 4,             // Animation  time in seconds.
        'spins'    : 6,              // Number of complete revolutions of the wheel.
        'callbackFinished' : 'winAnimation()', // After spinning finishes, play winning animation
        }
    });

        function winAnimation()
    {
            let winningSegment = theWheel.getIndicatedSegment();                // Get the text of the winning segment.
            let winningSegmentNumber = theWheel.getIndicatedSegmentNumber();    // Get the number of the winning segment.
 
        for (let i = 1; i < theWheel.segments.length; i ++) 
        {
            theWheel.segments[i].fillStyle = 'grey';                     // For loop and change fillStyle of all segments to grey.
}

        theWheel.segments[winningSegmentNumber].fillStyle = 'gold';     // Change winning segment colour.
 
        theWheel.draw();                                                // Call draw function to render changes.
           console.log(winningSegment.text);                           // Console logs the text of winning segment.
        }

    function resetWheel()
            {
                theWheel.stopAnimation(false);  // Stop the animation, false as param so does not call callback function.
                theWheel.rotationAngle = 0;     // Re-set the wheel angle to 0 degrees.
                theWheel.segments[1].fillStyle = '#eeefff';
                theWheel.segments[2].fillStyle = '#89f26e',
                theWheel.segments[3].fillStyle = '#7de6ef',
                theWheel.segments[4].fillStyle = '#e7706f',
                theWheel.segments[5].fillStyle = '#eff111',
                theWheel.segments[6].fillStyle = '#e77811';
                theWheel.draw();                // Call draw function to render changes.
            }
</script>
<button onClick="theWheel.startAnimation();">Spin the Wheel</button> <!-- Click to spin wheel -->
<button onClick="resetWheel();">Reset</button>
    </body>
</html>